// Generated by CoffeeScript 1.6.3
(function() {
  var $, AppView, Application, ApplicationList, ApplicationView;

  $ = jQuery;

  Application = Backbone.Model.extend({
    start: function() {
      return console.log('foo');
    }
  });

  ApplicationList = Backbone.Collection.extend({
    model: Application,
    url: '/api/applications'
  });

  window.Applications = new ApplicationList;

  ApplicationView = Backbone.View.extend({
    tagName: 'tr',
    template: Handlebars.templates['application.hbs'],
    initialize: function() {
      return this.listenTo(this.model, 'change', this.render);
    },
    render: function() {
      window.model = this.model;
      this.$el.html(this.template(this.model.toJSON()));
      return this;
    }
  });

  AppView = Backbone.View.extend({
    el: $('.js-application'),
    initialize: function() {
      this.listenTo(Applications, 'add', this.addOne);
      this.listenTo(Applications, 'reset', this.addAll);
      this.listenTo(Applications, 'all', this.render);
      return Applications.fetch();
    },
    render: function() {},
    addOne: function(app) {
      var view;
      console.log(app);
      view = new ApplicationView({
        model: app
      });
      return $('#application-list tbody').append(view.render().el);
    },
    addAll: function() {
      return Applications.each(this.addOne, this);
    }
  });

  $(document).ready(function() {
    return window.App = new AppView;
  });

}).call(this);
